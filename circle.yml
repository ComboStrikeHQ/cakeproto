machine:
  ruby:
    version: 2.3.0
  environment:
    GOVERSION: 1.5.3
    GOROOT: ${HOME}/go
    PATH: ${GOROOT}/bin:${PATH}
  post:
    - curl https://storage.googleapis.com/golang/go${GOVERSION}.linux-amd64.tar.gz |tar xz
dependencies:
  override:
    - make deps
test:
  override:
    - make style && [[ ! $(git diff) ]]
    - make test 2>&1 |tee log.out && ! grep WARN log.out
